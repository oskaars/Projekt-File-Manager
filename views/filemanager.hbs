<div class="sidebar">
    <button class="sidebar-btn" onclick="dirDialogModalHandler()">new folder</button>
    <button class="sidebar-btn" onclick="fileDialogModalHandler()">new file</button>
    
    <form class="upload-section" enctype="multipart/form-data" method="post" action="/uploadFiles">
        <label class="file-input-label sidebar-btn">
            Select files to upload
            <input type="file" name="files" class="file-input" multiple>
        </label>
        <input type="submit" class="upload-btn" value="upload">
    </form>
</div>

<div class="main-content">
    <div class="section">
        <div class="section-header">folders</div>
        <div class="container">
            {{#each dirs}}
            <div class="card">
                <div class="card-header">
                    <span class="type-badge dir">DIR</span>
                    <form method="post" action="/removeFolder">
                        <input type="hidden" name='dirToRemove' value="{{this}}">
                        <button type="submit" class="delete-btn">x</button>
                    </form>
                </div>
                <div class="card-name">{{this}}</div>
            </div>
            {{/each}}
        </div>
    </div>

    <div class="section">
        <div class="section-header">files</div>
        <div class="container">
            {{#each files}}
            <div class="card">
                <div class="card-header">
                    <span class="type-badge txt">TXT</span>
                    <form method="post" action="/removeFile">
                        <input type="hidden" name='fileToRemove' value="{{this}}">
                        <button type="submit" class="delete-btn">x</button>
                    </form>
                    <form method="post" action="/downloadFile">
                        <input type="hidden" name='fileToDownload' value="{{this}}">
                        <button type="submit" class="delete-btn">V</button>
                    </form>
                </div>
                <div class="card-name">{{this}}</div>
            </div>
            {{/each}}
        </div>
    </div>
</div>

<dialog id="dirDialog">
    <form action="" method="get">
        Wpisz nazwe folderu: <input type="text" name="dirName">
        <input type="submit" value="Create" formaction="/addDir" method="get">
        <button type="button" onclick="cancelDirModal()">Cancel</button>
    </form>
</dialog>

<dialog id="fileDialog">
    <form action="" method="get">
        Wpisz nazwe pliku: <input type="text" name="fileName">
        <input type="submit" value="Create" formaction="/addFile" method="get">
        <button type="button" onclick="cancelFileModal()">Cancel</button>
    </form>
</dialog>

<script>
    function cancelDirModal() {
        document.getElementById("dirDialog").close();
    }
    function cancelFileModal() {
        document.getElementById("fileDialog").close();
    }
    function dirDialogModalHandler() {
        document.getElementById("dirDialog").showModal();
    }
    function fileDialogModalHandler() {
        document.getElementById("fileDialog").showModal();
    }
</script>